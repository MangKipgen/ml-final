{"version":3,"sources":["Overlay.js","App.js","index.js"],"names":["Overlay","details","setOverlay","name","className","onClick","src","App","canvas","useRef","useState","overlay","useEffect","app","PIXI","width","window","innerWidth","height","innerHeight","view","current","viewport","Viewport","screenWidth","screenHeight","worldWidth","worldHeight","interaction","renderer","plugins","stage","addChild","drag","pinch","wheel","decelerate","positionDict","fetch","then","response","json","data","i","length","fileName","filename","replace","loader","add","load","resources","key","imageSprite","texture","clusterPos","cluster_pos","x","y","interactive","on","fit","moveCenter","ref","Helmet","content","class","data-react-helmet","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"gSAKe,SAASA,EAAT,GAA0C,IAAvBC,EAAsB,EAAtBA,QAASC,EAAa,EAAbA,WACjCC,EAASF,EAATE,KAER,OACE,sBAAKC,UAAU,UAAf,UACE,wBACEC,QAAS,WACPH,EAAW,OAFf,mBAKA,6BAAKC,IACL,qBAAKG,IAAK,YAAcH,EAAO,Y,kBCkGtBI,MAvGf,WACE,IAAMC,EAASC,iBAAO,MACtB,EAAgCC,mBAAS,MAAzC,mBAAQC,EAAR,KAAiBT,EAAjB,KA4EA,OAxEAU,qBAAU,WACR,IAAMC,EAAM,IAAIC,IAAiB,CAC/BC,MAAOC,OAAOC,WACdC,OAAQF,OAAOG,YACfC,KAAMZ,EAAOa,UAGTC,EAAW,IAAIC,IAAS,CAC5BC,YAAaR,OAAOC,WACpBQ,aAAcT,OAAOG,YACrBO,WAbgB,IAchBC,YAbiB,IAejBC,YAAaf,EAAIgB,SAASC,QAAQF,cAGpCf,EAAIkB,MAAMC,SAASV,GAEnBA,EACGW,OACAC,QACAC,QACAC,aAEH,IAAIC,EAAe,GAQnBC,MAAM,iBACHC,MAAK,SAACC,GAAc,OAAOA,EAASC,UACpCF,MAAK,SAACG,GACL,IAAI,IAAIC,EAAI,EAAGA,EAAID,EAAKE,OAAQD,IAAK,CACnC,IAAME,EAAWH,EAAKC,GAAGG,SAASC,QAAQ,MAAO,KAC3C5C,EAAO0C,EAASE,QAAQ,OAAQ,IACtClC,EAAImC,OAAOC,IAAI9C,EAAM,aAAe0C,GACpCH,EAAKC,GAAGxC,KAAOA,EACfkC,EAAalC,GAAQuC,EAAKC,GAG5B9B,EAAImC,OAAOE,MAAK,SAACF,EAAQG,GAAe,IAAD,WAC7BC,GACN,IAAMC,EAAc,IAAIvC,IAAYqC,EAAUC,GAAKE,SAC7CC,EAAalB,EAAae,GAAKI,YAErCH,EAAYI,EAAI,EAAI5C,EAAIgB,SAASd,OAAyB,EAAhBwC,EAAW,GAAS,GAC9DF,EAAYK,EAAI,EAAI7C,EAAIgB,SAASd,OAAyB,EAAhBwC,EAAW,GAAS,GAI9DF,EAAYM,aAAc,EAE1B,IAAMxD,EAAOiD,EAEbC,EAAYO,GAAG,SAAS,WACtB1D,EAAWmC,EAAalC,OAG1BmB,EAASU,SAASqB,GAClB/B,EAASuC,MAETvC,EAASwC,WAAWT,EAAYI,EAAGJ,EAAYK,IApBjD,IAAI,IAAIN,KAAOD,EAAY,EAAnBC,WA0Bb,IAID,sBAAKhD,UAAU,MAAf,UACE,wBAAQ2D,IAAKvD,IACZG,GACC,cAAC,EAAD,CACEV,QAASU,EACTT,WAAYA,IAId,eAAC8D,EAAA,EAAD,WACA,8DACA,sBAAM7D,KAAK,cAAc8D,QAAQ,oBACjC,sBAAM9D,KAAK,cAAc8D,QAAQ,YAHjC,MAIG,sBAAMC,MAAQ,QAAQC,oBAAkB,aAI7C,6BCvGNC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.ebb32257.chunk.js","sourcesContent":["import React from 'react';\n\n\nimport './Overlay.css';\n\nexport default function Overlay({ details, setOverlay}) {\n  const { name } = details;\n\n  return(\n    <div className=\"Overlay\">\n      <button\n        onClick={() => {\n          setOverlay(null);\n        }}\n      >Close</button>\n      <h1>{name}</h1>\n      <img src={'./images/' + name + '.jpg'} />\n    </div>\n    );\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport * as PIXI from 'pixi.js';\nimport { Viewport } from 'pixi-viewport';\nimport './App.css';\nimport Overlay from './Overlay';\nimport { Helmet } from 'react-helmet';\nimport main from './main';\n\n\n\n\nfunction App() {\n  const canvas = useRef(null);\n  const [ overlay, setOverlay ] = useState(null);\n  const world_Width = 3000;\n  const world_Height = 2000;\n\n  useEffect(() => {\n    const app = new PIXI.Application({\n      width: window.innerWidth,\n      height: window.innerHeight,\n      view: canvas.current\n    });\n\n    const viewport = new Viewport({\n      screenWidth: window.innerWidth,\n      screenHeight: window.innerHeight,\n      worldWidth: world_Width,\n      worldHeight: world_Height,\n      \n      interaction: app.renderer.plugins.interaction\n    });\n  \n    app.stage.addChild(viewport);\n\n    viewport\n      .drag()\n      .pinch()\n      .wheel()\n      .decelerate()\n\n    let positionDict = {}\n\n    // const siteName = new PIXI.Text('The British Museum Collection', style);\n    // console.log(style)\n\n    // app.stage.addChild(siteName);\n\n\n    fetch('./images.json')\n      .then((response) => {return response.json()})\n      .then((data) => {\n        for(let i = 0; i < data.length; i++) {\n          const fileName = data[i].filename.replace(/\\//g, '_');\n          const name = fileName.replace('.jpg', '');\n          app.loader.add(name, './resized/' + fileName);\n          data[i].name = name;\n          positionDict[name] = data[i];\n        }\n\n        app.loader.load((loader, resources) => {\n          for(let key in resources) {\n            const imageSprite = new PIXI.Sprite(resources[key].texture)\n            const clusterPos = positionDict[key].cluster_pos;\n\n            imageSprite.x = 5 * app.renderer.width * (clusterPos[0] * 3 - 1);\n            imageSprite.y = 5 * app.renderer.width * (clusterPos[1] * 3 - 1);\n\n            // imageSprite.anchor.x = 0.5;\n            // imageSprite.anchor.y = 0.5;\n            imageSprite.interactive = true;\n\n            const name = key;\n\n            imageSprite.on('click', () => {\n              setOverlay(positionDict[name]);\n            });\n\n            viewport.addChild(imageSprite)\n            viewport.fit()\n            // viewport.moveCenter(world_Width, world_Height)\n            viewport.moveCenter(imageSprite.x, imageSprite.y)\n\n          }\n        });\n      });\n\n  }, [])\n\n  return (\n\n    <div className=\"App\">\n      <canvas ref={canvas} />\n      {overlay &&\n        <Overlay\n          details={overlay}\n          setOverlay={setOverlay}\n        />\n      }\n\n        <Helmet>\n        <title>British Museum Collection</title>\n        <meta name=\"description\" content=\"App Description\" />\n        <meta name=\"theme-color\" content=\"#D3D3D3\" />\n        // <body class = 'light' data-react-helmet='class'>\n        </body>\n        </Helmet>\n\n      <main />\n\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}